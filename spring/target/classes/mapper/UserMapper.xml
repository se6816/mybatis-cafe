<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

  
  <mapper namespace="com.test.Mapper.UserMapper">
  	
  	<resultMap type="com.test.domain.UserVO" id="user">
  		<result column="id" property="id"/>
  		<result column="password" property="password"/>
  		<result column="username" property="username"/>
  		<result column="email" property="email"/>
  		<result column="role" property="role" 
  			typeHandler="org.apache.ibatis.type.EnumTypeHandler"/>
  	</resultMap>
  	<select id="selectMember" resultType="com.test.domain.UserVO">
  		select *
  		from
  			user
  		where
  		    id=#{id};
  	</select> 	
  	<select id="isUserName" resultType="integer">
  	 select count(*)
  	 	from 
  	 		user
  	 	where
  	 		username=#{username}
  	</select>
  	<select id="isID" resultType="integer">
  	select count(*)
  		from 
  			user
  		where
  			id=#{id}
  	</select>
  	
  	
  	<insert id="insertMember">
  		insert into user (id, password, username, email, role) values
  		(#{id},#{password},#{username},#{email}, 
  		#{role, typeHandler=org.apache.ibatis.type.EnumTypeHandler})
  	</insert>
  	
  	<delete id="deleteMember">
  		delete
  		from user
  		where id=#{id}
  	</delete>
  	<insert id="writeLog">
  		insert into log(userId,ipAddress) values
  		(#{username},#{ip}
  		)
  	</insert>
 	
  </mapper>
  